---
title: http-flv 配置
permalink: /docs/zh/config-flv
key: docs-2.3-config-flv--zh
---

## 配置

### flv_live

*Syntax:* `flv_live [rtmp service port] [app=bind rtmp application] [audio=0|1] [video=0|1]`  
*Context:* location

* **Desc**  
    > http-flv需要在http模块的location里配置。
    > - app参数：当location与application的名字不同时，需要其后跟 app=xxx 来把location与application绑定起来。如果location与application的名字相同，则无需app=xxx参数绑定。  
    > - audio参数：在flv header里添加音频标志。如果flv header中设置了音频标记，但是flv body中却没有传输音频流只有视频流，播放器可能会尝试等待过久的时间才会开始解码视频帧（首帧显示过慢）。  
    > - video参数：在flv heaer里添加video标志。  
    `必须显示配置`{:.error}

* **For example**  
    ```nginx
    rtmp {
        server {
            listen 1935;
            application live0 {
                live on;
            }
            application live1 {
                live on;
            }
        }
    }

    http {
        server {
            listen 80;
            location flv0 {
                flv_live 1935 app=live0;
            }
            location flv1 {
                flv_live 1935 app=live1;
            }
            location live0 {
                flv_live 1935;
            }
            location live1 {
                flv_live 1935;
            }
        }
    }
    ```

## 测试

* rtmp推流地址：rtmp://ip/live0/stream-name

> 对应的http-flv播放地址：http://ip/live0/stream-name 和 http://ip/flv0/stream-name

* rtmp推流地址：rtmp://ip/live1/stream-name

> 对应的http-flv播放地址：http://ip/live1/stream-name 和 http://ip/flv1/stream-name
